CREATE OR REPLACE PROCEDURE SP_FACILTY_MASTER_MIG_VALIDATE
AS
  AVAIL_AND_OPTION_APPLICABLE VARCHAR2(10);
  CURSOR CR_DATA
  IS
    SELECT * FROM FACILTY_MASTER_MIG_TEMP WHERE UPDATE_STATUS = 'N';
  RC_DATA CR_DATA%ROWTYPE;
BEGIN
  OPEN CR_DATA;
  LOOP
    FETCH CR_DATA INTO RC_DATA;
    EXIT
  WHEN CR_DATA%NOTFOUND;
    AVAIL_AND_OPTION_APPLICABLE   := RC_DATA.AVAIL_AND_OPTION_APPLICABLE;
    IF AVAIL_AND_OPTION_APPLICABLE = 'on' OR AVAIL_AND_OPTION_APPLICABLE='off' THEN
      UPDATE FACILTY_MASTER_MIG_TEMP
      SET IS_VALIDATED        = 'Y'
      WHERE NEW_FACILITY_CODE = RC_DATA.NEW_FACILITY_CODE;
    END IF;
    IF AVAIL_AND_OPTION_APPLICABLE = 'on' OR AVAIL_AND_OPTION_APPLICABLE='off' THEN
      UPDATE FACILTY_MASTER_MIG_TEMP
      SET IS_VALIDATED        = 'Y'
      WHERE NEW_FACILITY_CODE = RC_DATA.NEW_FACILITY_CODE;
    END IF;
  END LOOP;
  CLOSE CR_DATA;
  COMMIT;
END SP_FACILTY_MASTER_MIG_VALIDATE;
