@echo off

call ..\set_mig_env.cmd %*

IF NOT "%IS_PROCEED%"=="true" (
	goto end
)

db2 LOAD FROM "%FILE_PATH%" OF DEL MODIFIED BY COLDEL, DUMPFILE="%DUMP_PATH%" IMPLIEDDECIMAL TIMESTAMPFORMAT=\"YYYYMMDD\" METHOD P (1, 2, 3, 4, 5, 6, 7, 9, 10, 11, 14, 15, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28)  MESSAGES "%LOG_PATH%" INSERT INTO "%DB_SCHEMA%".DC_GT (CIF_NUMBER, BORROWER_NAME, ACCOUNT_NUMBER, BUSINESS_UNIT, BRANCH_CODE, CMS_COLLATERAL_ID, COLLATERAL_CODE, COLLATERAL_NAME, SECURITY_CURRENCY,  SECURITY_MATURITY_DATE, GUARANTEE_DATE, GUARANTEE_REF_NUMBER, CORRESPONDENCE_BANK, WITHIN_CORRESPONDENCE_BANK_LMT, CORRESPONDING_BANK, CLAIM_PERIOD, CLAIM_PERIOD_TIME_UNIT, SCHEME, GUARANTEE_FEE_AMT, CGC_FEE_PAYMENT_ACCT, TENOR, TENOR_UOM, EFFECTIVE_DATE, EXPIRATION_DATE) FOR EXCEPTION "%DB_SCHEMA%".DC_GT_ERR NONRECOVERABLE CHECK PENDING CASCADE IMMEDIATE


db2 SET INTEGRITY FOR "%DB_SCHEMA%".DC_GT IMMEDIATE CHECKED FORCE GENERATED FULL ACCESS FOR EXCEPTION IN "%DB_SCHEMA%".DC_GT USE "%DB_SCHEMA%".DC_GT_ERR

:end